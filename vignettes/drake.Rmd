---
title: "drake"
subtitle: "data frames in R for Make"
author: "William Michael Landau"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{drake}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

![](logo-small.png)


```{r, echo = F}
suppressMessages(suppressWarnings(library(drake)))
clean(destroy = TRUE)
```

Drake is an R package for high-performance computing and reproducible data analysis. It helps you skip the work you already did, accelerate the rest with parallel processing, stay organized, and confirm that your results are up to date with your code. Drake stands on the shoulders of tools like 
[GNU Make](https://www.gnu.org/software/make) and [Rich FitzJohn](http://richfitz.github.io/)'s [remake](https://github.com/richfitz/remake) package, and it offers improvements in reproducibility, scalability, and convenience.

# Acknowledgements and history

The original idea of a time-saving reproducible build system extends back decades to [GNU Make](http://kbroman.org/minimal_make/), which today helps [data scientists](http://blog.kaggle.com/2012/10/15/make-for-data-scientists/) as well as the original user base of complied-language programmers. More recently, [Rich FitzJohn](http://richfitz.github.io/) created [remake](https://github.com/richfitz/remake), a breakthrough reimagining of [Make](http://kbroman.org/minimal_make/) for R and the most important inspiration for drake. Drake is a fresh reinterpretation of some of  [remake](https://github.com/richfitz/remake)'s pioneering fundamental concepts, scaled up for computationally-demanding workflows. 

Thanks also to [Kirill M&uuml;ller](http://krlmlr.github.io/) and [Daniel Falster](http://danielfalster.com/). They contributed code patches and enhancement ideas to my [parallelRemake](https://github.com/wlandau/parallelRemake) and [remakeGenerator](https://github.com/wlandau/remakeGenerator) packages, which I have now subsumed into drake.

# Advantages of drake

Some advantages of drake, especially relative to [remake](https://github.com/richfitz/remake) at the time of writing, are

1. reproducibility. Drake can
    - import and track arbitrary variables from your workspace.
    - track functions from packages.
2. safety.
    - If you manually break an output file target, drake can fix it with another call to `make()`.
3. parallel computing. Auto-magically run multiple targets simultaneously.
    - Switch on the `mclapply()` or `parLapply()` backend for light parallelism within a single R session.
    - Switch on a `Makefile` to parallelize over multiple R sessions, which you can distribute across several nodes of a computing cluster or a supercomputer.
4. convenience.
    - No YAML files!
    - With functions like `plan()`, `datasets()`, `analyses()`, `evaluate()`, `expand()`, and `gather()`, you can minimize typing when you set up a project.

# Windows

Drake presents `mclapply()` as one of two single-session parallel computing backends. Unfortunately, `mclapply()` cannot run multiple parallel jobs on Windows, so Windows users should use set `parallelism = "parLapply"` rather than `parallelism = "mclapply"` inside `make()` (already the Windows default). For true distributed parallel computing over multiple R sessions, Windows users need to download and install [`Rtools`](https://cran.r-project.org/bin/windows/Rtools/). This is because drake runs [Makefiles](http://kbroman.org/minimal_make/) with `system2("make", ...)`.

# Tutorials

The [CRAN page](https://CRAN.R-project.org/package=drake) links to multiple tutorials and vignettes. With drake installed, you can load any of the vignettes 
in an R session.

```r
vignette(package = "drake") # List the vignettes.
vignette("drake") # High-level intro.
vignette("quickstart") # Walk through a simple example.
vignette("caution") # Drake is not perfect. Read this to be safe.
```

# Quickstart examples

Drake has small self-contained built-in examples. To see the names of the available examples, use

```{r}
examples_drake()
```

Then use `example_drake()` to write the files for the example to your working directory.

```{r, eval = FALSE}
example_drake("basic")
```

Step through the code files to get started.

# Words of caution

Drake tries to reproducibly track everything and make other obviously good decisions, but there are limitations. For example, in some edge cases, it is possible to trick drake into ignoring dependencies. Please read the "caution" vignette to use drake safely (`vignette("caution")`, also linked from the [CRAN page](https://CRAN.R-project.org/package=drake) under "vignettes").

# Help and troubleshooting

For troubleshooting, please refer to [TROUBLESHOOTING.md](https://github.com/wlandau-lilly/drake/blob/master/TROUBLESHOOTING.md) on the [GitHub page](https://github.com/wlandau-lilly/drake) for instructions.
